<!DOCTYPE html>
<html>
<head>
<title>Admin Panel</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/static/styles.css" rel="stylesheet">
</head>

<body>

<div class="container mt-4">

<h2>Admin Control Panel</h2>
<hr>

<!-- ================= ANALYTICS ================= -->

<h4>ğŸ“Š System Analytics</h4>

<div class="row mt-3">
    <div class="col-md-4">
        <div class="card p-3 text-center">
            <h6>Total Users</h6>
            <h3>{{ total_users }}</h3>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card p-3 text-center">
            <h6>Total Sessions</h6>
            <h3>{{ total_sessions }}</h3>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card p-3 text-center">
            <h6>Total Messages</h6>
            <h3>{{ total_messages }}</h3>
        </div>
    </div>
</div>

<hr>

<!-- ================= POPULAR INTENTS ================= -->

<h4>ğŸ”¥ Popular Topics</h4>

<table class="table table-bordered mt-3">
<tr>
<th>Intent</th>
<th>Count</th>
</tr>
{% for intent in popular_intents %}
<tr>
<td>{{ intent.name if intent.name else intent[0] }}</td>
<td>{{ intent.count if intent.count else intent[1] }}</td>
</tr>
{% endfor %}
</table>

<hr>

<!-- ================= UNANSWERED ================= -->

<h4>â“ Unanswered Questions</h4>

<table class="table table-striped mt-3">
<tr>
<th>ID</th>
<th>Question</th>
<th>Time</th>
</tr>
{% for q in unanswered %}
<tr>
<td>{{ q.id if q.id else q[0] }}</td>
<td>{{ q.question if q.question else q[1] }}</td>
<td>{{ q.created_at if q.created_at else q[2] }}</td>
</tr>
{% endfor %}
</table>

<hr>

<!-- ================= INTENT MANAGEMENT ================= -->

<h4>ğŸ›  Manage Intents</h4>

<p>To modify chatbot responses, edit <code>chatbot_data.py</code> file directly.</p>

<div class="alert alert-info">
Currently, intents are defined statically in <strong>chatbot_data.py</strong>.
To enable dynamic intent editing via admin panel, we must move intents to database.
</div>

<hr>

<div class="text-end mt-4">
<a href="/dashboard" class="btn btn-secondary">Back to Dashboard</a>
<a href="/logout" class="btn btn-danger">Logout</a>
</div>

</div>

</body>
</html>
